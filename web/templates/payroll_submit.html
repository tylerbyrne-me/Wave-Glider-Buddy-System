{% extends "base.html" %}

{% block title %}Submit Timesheet - Wave Glider Buddy{% endblock %}

{% block body_class %}container mt-4{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
    <h1>Submit Timesheet</h1>
</div>

<div class="card">
    <div class="card-body">
        <div id="formContainer">
            <div class="mb-3">
                <label for="payPeriodSelect" class="form-label">Select a Pay Period to Submit:</label>
                <div id="payPeriodSpinner" class="spinner-border spinner-border-sm" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
                <select class="form-select" id="payPeriodSelect" disabled>
                    <option selected>Loading pay periods...</option>
                </select>
            </div>

            <div id="calculationSection" style="display:none;">
                <hr>
                <p>Based on your scheduled shifts, we've calculated the following hours for this period.</p>
                <div class="text-center my-4">
                    <h3>Total Hours: <span id="calculatedHours" class="fw-bold">--</span></h3>
                    <div id="hoursSpinner" class="spinner-border text-primary" role="status" style="display:none;">
                        <span class="visually-hidden">Calculating...</span>
                    </div>
                </div>

                <form id="timesheetSubmitForm">
                    <div class="mb-3">
                        <label for="pilotNotes" class="form-label">Notes (Optional)</label>
                        <textarea class="form-control" id="pilotNotes" rows="3" placeholder="Add any notes for the administrator regarding your hours."></textarea>
                    </div>
                    <p class="small text-muted">By clicking submit, you are validating that the calculated hours are correct for the selected pay period.</p>
                    <button type="submit" id="submitTimesheetBtn" class="btn btn-primary" disabled>Submit Timesheet</button>
                </form>
            </div>
        </div>
        <div id="submissionStatus" class="mt-3"></div>
    </div>
</div>
{% endblock %}

{% block body_extra_js %}
<script type="module" src="/static/js/payroll_submit.js"></script>
{% endblock %}